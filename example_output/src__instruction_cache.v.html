<html>
  <head>
    <link rel="stylesheet" href="rtl_html_style.css">
  </head>
  <body>
    <p>File path: src/instruction_cache.v</p>
    <hr>
    <pre class="code">
<code id="1">`timescale <span class="hljs-const">1</span>ns<span class="hljs-operator">/</span><span class="hljs-const">1</span>ps</code>
<code id="2"></code>
<code id="3"><span class="hljs-keyword">module</span> instruction_cache<span class="hljs-operator">(</span></code>
<code id="4">    <span class="hljs-keyword">input</span>   <span class="hljs-keyword">wire</span>    <span class="hljs-operator">[</span><span class="hljs-const">ADDR_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>            i_addr<span class="hljs-operator">,</span></code>
<code id="5">    <span class="hljs-keyword">input</span>   <span class="hljs-keyword">wire</span>                                i_valid<span class="hljs-operator">,</span> </code>
<code id="6"></code>
<code id="7">    <span class="hljs-keyword">input</span>   <span class="hljs-keyword">wire</span>                                clk<span class="hljs-operator">,</span></code>
<code id="8">    <span class="hljs-keyword">input</span>   <span class="hljs-keyword">wire</span>                                arst_n<span class="hljs-operator">,</span></code>
<code id="9">    <span class="hljs-keyword">input</span>   <span class="hljs-keyword">wire</span>                                i_halt<span class="hljs-operator">,</span></code>
<code id="10"></code>
<code id="11">    <span class="hljs-comment">// memory interface &gt;&gt;&gt;</span></code>
<code id="12">    <span class="hljs-keyword">input</span>   <span class="hljs-keyword">wire</span>    <span class="hljs-operator">[</span><span class="hljs-const">MEM_IF_DATA_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>     i_mem_data<span class="hljs-operator">,</span></code>
<code id="13">    <span class="hljs-keyword">input</span>   <span class="hljs-keyword">wire</span>                                i_mem_data_valid<span class="hljs-operator">,</span></code>
<code id="14">    <span class="hljs-comment">// &lt;&lt;&lt;&lt; memory interface </span></code>
<code id="15"></code>
<code id="16">    <span class="hljs-keyword">output</span>  <span class="hljs-keyword">wire</span>    <span class="hljs-operator">[</span><span class="hljs-const">WORD_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>            o_data<span class="hljs-operator">,</span></code>
<code id="17">    <span class="hljs-keyword">output</span>  <span class="hljs-keyword">wire</span>                                o_valid<span class="hljs-operator">,</span></code>
<code id="18">    <span class="hljs-keyword">output</span>  <span class="hljs-keyword">wire</span>                                o_ready<span class="hljs-operator">,</span></code>
<code id="19"></code>
<code id="20">    <span class="hljs-comment">// memory interface &gt;&gt;&gt;</span></code>
<code id="21">    <span class="hljs-keyword">output</span>  <span class="hljs-keyword">wire</span>    <span class="hljs-operator">[</span><span class="hljs-const">MEM_IF_ADDR_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>     o_mem_addr<span class="hljs-operator">,</span></code>
<code id="22">    <span class="hljs-keyword">output</span>  <span class="hljs-keyword">wire</span>                                o_mem_req_valid<span class="hljs-operator">,</span></code>
<code id="23">    <span class="hljs-keyword">output</span>  <span class="hljs-keyword">wire</span>                                o_mem_if_ready</code>
<code id="24">    <span class="hljs-comment">// &lt;&lt;&lt;&lt; memory interface </span></code>
<code id="25"><span class="hljs-operator">)</span><span class="hljs-operator">;</span></code>
<code id="26">    </code>
<code id="27">    <span class="hljs-keyword">localparam</span> <span class="hljs-const">ADDR_WIDTH</span> <span class="hljs-operator">=</span> <span class="hljs-const">16</span><span class="hljs-operator">;</span></code>
<code id="28">    <span class="hljs-keyword">localparam</span> <span class="hljs-const">WORD_WIDTH</span> <span class="hljs-operator">=</span> <span class="hljs-const">20</span><span class="hljs-operator">;</span></code>
<code id="29">    <span class="hljs-keyword">localparam</span> <span class="hljs-const">MEM_IF_DATA_WIDTH</span> <span class="hljs-operator">=</span> <span class="hljs-const">40</span><span class="hljs-operator">;</span></code>
<code id="30">    <span class="hljs-keyword">localparam</span> <span class="hljs-const">MEM_IF_ADDR_WIDTH</span> <span class="hljs-operator">=</span> <span class="hljs-const">16</span><span class="hljs-operator">;</span></code>
<code id="31"></code>
<code id="32">    <span class="hljs-keyword">localparam</span> <span class="hljs-const">SET_BITS_WIDTH</span> <span class="hljs-operator">=</span> <span class="hljs-const">4</span><span class="hljs-operator">;</span></code>
<code id="33">    <span class="hljs-keyword">localparam</span> <span class="hljs-const">B_OFFSET_BITS_WIDTH</span> <span class="hljs-operator">=</span> <span class="hljs-const">4</span><span class="hljs-operator">;</span></code>
<code id="34">    <span class="hljs-keyword">localparam</span> <span class="hljs-const">TAG_BITS_WIDTH</span> <span class="hljs-operator">=</span> <span class="hljs-const">8</span><span class="hljs-operator">;</span></code>
<code id="35">    <span class="hljs-keyword">localparam</span> <span class="hljs-const">NUM_WAYS</span> <span class="hljs-operator">=</span> <span class="hljs-const">4</span><span class="hljs-operator">;</span></code>
<code id="36"></code>
<code id="37"></code>
<code id="38">    <span class="hljs-keyword">localparam</span> <span class="hljs-const">TA_WORD_WIDTH</span>    <span class="hljs-operator">=</span> <span class="hljs-const">32</span><span class="hljs-operator">;</span> <span class="hljs-comment">// 8 bits x 4 ways</span></code>
<code id="39">    <span class="hljs-keyword">localparam</span> <span class="hljs-const">SA_WORD_WIDTH</span>    <span class="hljs-operator">=</span> <span class="hljs-const">8</span><span class="hljs-operator">;</span> <span class="hljs-comment">// 2 bits x 4 ways</span></code>
<code id="40">    <span class="hljs-keyword">localparam</span> <span class="hljs-const">DA_WRITE_WIDTH</span>   <span class="hljs-operator">=</span> <span class="hljs-const">80</span><span class="hljs-operator">;</span></code>
<code id="41"></code>
<code id="42">    <span class="hljs-keyword">wire</span> tc_cache_hit<span class="hljs-operator">;</span></code>
<code id="43">    <span class="hljs-keyword">wire</span> cmh_miss_state<span class="hljs-operator">;</span></code>
<code id="44">    <span class="hljs-keyword">wire</span> glb_miss_state <span class="hljs-operator">=</span> <span class="hljs-operator">(</span><span class="hljs-operator">~</span>tc_cache_hit<span class="hljs-operator">)</span><span class="hljs-operator">&amp;</span>tc_valid <span class="hljs-operator">|</span> cmh_miss_state<span class="hljs-operator">;</span></code>
<code id="45"></code>
<code id="46">    <span class="hljs-comment">// ============ STAGE 1 BEGINS ============</span></code>
<code id="47"></code>
<code id="48">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">ADDR_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span> ics1r_addr<span class="hljs-operator">;</span></code>
<code id="49">    <span class="hljs-keyword">wire</span> ics1r_addr_valid<span class="hljs-operator">;</span></code>
<code id="50">    <span class="hljs-keyword">wire</span> ics1r_curr_r_addr_ready<span class="hljs-operator">;</span></code>
<code id="51"></code>
<code id="52">    <span class="hljs-keyword">assign</span> o_ready <span class="hljs-operator">=</span> ics1r_curr_r_addr_ready<span class="hljs-operator">;</span></code>
<code id="53"></code>
<code id="54">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">TAG_BITS_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>       ics1_addr_tag_bits<span class="hljs-operator">;</span> <span class="hljs-comment">// ics1 == icache_stage1      </span></code>
<code id="55">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">SET_BITS_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>       ics1_addr_set_bits<span class="hljs-operator">;</span>         </code>
<code id="56">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">B_OFFSET_BITS_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>  ics1_addr_block_offset_bits<span class="hljs-operator">;</span></code>
<code id="57">    <span class="hljs-keyword">wire</span> ics1_metadata_valid<span class="hljs-operator">;</span></code>
<code id="58"></code>
<code id="59">    <span class="hljs-keyword">wire</span> ics1_ready<span class="hljs-operator">;</span> </code>
<code id="60"></code>
<code id="61">    ics1_restart ics1_restart_m<span class="hljs-operator">(</span></code>
<code id="62">        .i_curr_r_addr<span class="hljs-operator">(</span>i_addr<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="63">        .i_curr_r_addr_valid<span class="hljs-operator">(</span>i_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="64"></code>
<code id="65">        .i_prev_r_addr<span class="hljs-operator">(</span><span class="hljs-operator">{</span>ics1_addr_tag_bits<span class="hljs-operator">,</span> ics1_addr_set_bits<span class="hljs-operator">,</span> ics1_addr_block_offset_bits<span class="hljs-operator">}</span><span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="66">        .i_prev_r_addr_valid<span class="hljs-operator">(</span>ics1_metadata_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="67"></code>
<code id="68">        .i_miss_state<span class="hljs-operator">(</span>glb_miss_state<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="69"></code>
<code id="70">        .clk<span class="hljs-operator">(</span>clk<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="71">        .arst_n<span class="hljs-operator">(</span>arst_n<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="72">        .i_halt<span class="hljs-operator">(</span><span class="hljs-operator">~</span>ics1_ready<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="73"></code>
<code id="74">        .o_r_addr<span class="hljs-operator">(</span>ics1r_addr<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="75">        .o_r_addr_valid<span class="hljs-operator">(</span>ics1r_addr_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="76"></code>
<code id="77">        .o_curr_r_addr_ready<span class="hljs-operator">(</span>ics1r_curr_r_addr_ready<span class="hljs-operator">)</span></code>
<code id="78">    <span class="hljs-operator">)</span><span class="hljs-operator">;</span></code>
<code id="79">    </code>
<code id="80">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">SET_BITS_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>   sawb_w_set_addr<span class="hljs-operator">;</span></code>
<code id="81">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">SA_WORD_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>    sawb_w_data<span class="hljs-operator">;</span></code>
<code id="82">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">NUM_WAYS</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>         sawb_w_mask<span class="hljs-operator">;</span></code>
<code id="83">    <span class="hljs-keyword">wire</span>                        sawb_w_valid<span class="hljs-operator">;</span></code>
<code id="84"></code>
<code id="85">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">SET_BITS_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>   cmh_w_sa_set_addr<span class="hljs-operator">;</span></code>
<code id="86">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">SA_WORD_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>    cmh_w_sa_data<span class="hljs-operator">;</span></code>
<code id="87">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">NUM_WAYS</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>         cmh_w_sa_blocks_mask<span class="hljs-operator">;</span></code>
<code id="88">    <span class="hljs-keyword">wire</span>                        cmh_w_sa_valid<span class="hljs-operator">;</span></code>
<code id="89"></code>
<code id="90">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">SA_WORD_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>    ubu_sa_w_data<span class="hljs-operator">;</span></code>
<code id="91">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">NUM_WAYS</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>         ubu_sa_w_mask<span class="hljs-operator">;</span></code>
<code id="92">    <span class="hljs-keyword">wire</span>                        ubu_valid<span class="hljs-operator">;</span></code>
<code id="93"></code>
<code id="94">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">SET_BITS_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>   tc_set_bits<span class="hljs-operator">;</span></code>
<code id="95"></code>
<code id="96">    sa_w_arb  sa_w_arb_m<span class="hljs-operator">(</span></code>
<code id="97">        .i_ubit_upd_sa_set_addr<span class="hljs-operator">(</span>tc_set_bits<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="98">        .i_ubit_upd_sa_data<span class="hljs-operator">(</span>ubu_sa_w_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="99">        .i_ubit_upd_sa_mask<span class="hljs-operator">(</span>ubu_sa_w_mask<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="100">        .i_ubit_upd_sa_valid<span class="hljs-operator">(</span>ubu_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="101"></code>
<code id="102">        .i_miss_write_set_addr<span class="hljs-operator">(</span>cmh_w_sa_set_addr<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="103">        .i_miss_write_data<span class="hljs-operator">(</span>cmh_w_sa_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="104">        .i_miss_write_mask<span class="hljs-operator">(</span>cmh_w_sa_blocks_mask<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="105">        .i_miss_if_valid<span class="hljs-operator">(</span>cmh_w_sa_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="106"></code>
<code id="107">        .i_miss_state<span class="hljs-operator">(</span>glb_miss_state<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="108"></code>
<code id="109">        .o_w_set_addr<span class="hljs-operator">(</span>sawb_w_set_addr<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="110">        .o_w_data<span class="hljs-operator">(</span>sawb_w_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="111">        .o_w_mask<span class="hljs-operator">(</span>sawb_w_mask<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="112">        .o_w_valid<span class="hljs-operator">(</span>sawb_w_valid<span class="hljs-operator">)</span></code>
<code id="113">    <span class="hljs-operator">)</span><span class="hljs-operator">;</span></code>
<code id="114">    </code>
<code id="115">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">TAG_BITS_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>       w_addr_tag_bits             <span class="hljs-operator">=</span> ics1r_addr<span class="hljs-operator">[</span><span class="hljs-const">1</span><span class="hljs-keyword"><span class="hljs-const">5</span></span><span class="hljs-operator">:</span><span class="hljs-const">8</span><span class="hljs-operator">]</span><span class="hljs-operator">;</span></code>
<code id="116">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">SET_BITS_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>       w_addr_set_bits             <span class="hljs-operator">=</span> ics1r_addr<span class="hljs-operator">[</span><span class="hljs-const">7</span><span class="hljs-operator">:</span><span class="hljs-const">4</span><span class="hljs-operator">]</span><span class="hljs-operator">;</span></code>
<code id="117">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">B_OFFSET_BITS_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>  w_addr_block_offset_bits    <span class="hljs-operator">=</span> ics1r_addr<span class="hljs-operator">[</span><span class="hljs-const">3</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span><span class="hljs-operator">;</span></code>
<code id="118"></code>
<code id="119">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">TA_WORD_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>  ics1_ta_data<span class="hljs-operator">;</span></code>
<code id="120">    <span class="hljs-keyword">wire</span> ics1_ta_valid<span class="hljs-operator">;</span></code>
<code id="121"></code>
<code id="122">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">SA_WORD_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>  ics1_sa_data<span class="hljs-operator">;</span> </code>
<code id="123">    <span class="hljs-keyword">wire</span> ics1_sa_valid<span class="hljs-operator">;</span></code>
<code id="124"></code>
<code id="125">    <span class="hljs-keyword">wire</span> tc_ready<span class="hljs-operator">;</span></code>
<code id="126"></code>
<code id="127">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">SET_BITS_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>   cmh_w_ta_set_addr<span class="hljs-operator">;</span></code>
<code id="128">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">TA_WORD_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>    cmh_w_ta_data<span class="hljs-operator">;</span></code>
<code id="129">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">NUM_WAYS</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>         cmh_w_ta_blocks_mask<span class="hljs-operator">;</span></code>
<code id="130">    <span class="hljs-keyword">wire</span>                        cmh_w_ta_valid<span class="hljs-operator">;</span></code>
<code id="131"></code>
<code id="132"></code>
<code id="133">    icache_stage1 #<span class="hljs-operator">(</span>.<span class="hljs-const">METADATA_WIDTH</span><span class="hljs-operator">(</span><span class="hljs-const">ADDR_WIDTH</span><span class="hljs-operator">)</span><span class="hljs-operator">)</span> icache_stage1_m <span class="hljs-operator">(</span></code>
<code id="134">        .i_metadata<span class="hljs-operator">(</span><span class="hljs-operator">{</span>w_addr_tag_bits<span class="hljs-operator">,</span> w_addr_set_bits<span class="hljs-operator">,</span> w_addr_block_offset_bits<span class="hljs-operator">}</span><span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="135">        .i_metadata_valid<span class="hljs-operator">(</span>ics1r_addr_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="136"></code>
<code id="137">        .i_r_set_addr<span class="hljs-operator">(</span>w_addr_set_bits<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="138">        .i_r_valid<span class="hljs-operator">(</span>ics1r_addr_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="139"></code>
<code id="140">        <span class="hljs-comment">// from miss handler &gt;&gt;&gt; </span></code>
<code id="141">        .i_w_ta_set_addr<span class="hljs-operator">(</span>cmh_w_ta_set_addr<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="142">        .i_w_ta_data<span class="hljs-operator">(</span>cmh_w_ta_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="143">        .i_w_ta_mask<span class="hljs-operator">(</span>cmh_w_ta_blocks_mask<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="144">        .i_w_ta_valid<span class="hljs-operator">(</span>cmh_w_ta_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="145">        <span class="hljs-comment">// from miss handler &lt;&lt;&lt;</span></code>
<code id="146"></code>
<code id="147">        .i_w_sa_set_addr<span class="hljs-operator">(</span>sawb_w_set_addr<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="148">        .i_w_sa_data<span class="hljs-operator">(</span>sawb_w_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="149">        .i_w_sa_mask<span class="hljs-operator">(</span>sawb_w_mask<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="150">        .i_w_sa_valid<span class="hljs-operator">(</span>sawb_w_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="151"></code>
<code id="152">        .clk<span class="hljs-operator">(</span>clk<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="153">        .arst_n<span class="hljs-operator">(</span>arst_n<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="154">        .i_halt<span class="hljs-operator">(</span>i_halt<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="155">        </code>
<code id="156">        .o_ta_data<span class="hljs-operator">(</span>ics1_ta_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="157">        .o_ta_data_valid<span class="hljs-operator">(</span>ics1_ta_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="158"></code>
<code id="159">        .o_sa_data<span class="hljs-operator">(</span>ics1_sa_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="160">        .o_sa_data_valid<span class="hljs-operator">(</span>ics1_sa_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="161"></code>
<code id="162">        .o_metadata<span class="hljs-operator">(</span><span class="hljs-operator">{</span>ics1_addr_tag_bits<span class="hljs-operator">,</span> ics1_addr_set_bits<span class="hljs-operator">,</span> ics1_addr_block_offset_bits<span class="hljs-operator">}</span><span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="163">        .o_metadata_valid<span class="hljs-operator">(</span>ics1_metadata_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="164"></code>
<code id="165">        .o_ready<span class="hljs-operator">(</span>ics1_ready<span class="hljs-operator">)</span></code>
<code id="166">    <span class="hljs-operator">)</span><span class="hljs-operator">;</span></code>
<code id="167">  </code>
<code id="168"></code>
<code id="169">    <span class="hljs-comment">// ============ STAGE 1 ENDS ============</span></code>
<code id="170">    <span class="hljs-comment">// =======================================</span></code>
<code id="171">    <span class="hljs-comment">// ============ STAGE 2 BEGINS ============</span></code>
<code id="172"></code>
<code id="173">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">TAG_BITS_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>           tc_tag_bits<span class="hljs-operator">;</span></code>
<code id="174">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">B_OFFSET_BITS_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>      tc_block_offset_bits<span class="hljs-operator">;</span></code>
<code id="175">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">NUM_WAYS</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>                 tc_hit_blocks<span class="hljs-operator">;</span></code>
<code id="176">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">SA_WORD_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>            tc_sa_data<span class="hljs-operator">;</span></code>
<code id="177">    <span class="hljs-keyword">wire</span>                                tc_valid<span class="hljs-operator">;</span></code>
<code id="178">    </code>
<code id="179"></code>
<code id="180"></code>
<code id="181">    tag_checker tc <span class="hljs-operator">(</span></code>
<code id="182">        .i_tag_bits<span class="hljs-operator">(</span>ics1_addr_tag_bits<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="183"></code>
<code id="184">        .i_ta_data<span class="hljs-operator">(</span>ics1_ta_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="185">        .i_status_array_data<span class="hljs-operator">(</span>ics1_sa_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="186"></code>
<code id="187">        .i_set_bits<span class="hljs-operator">(</span>ics1_addr_set_bits<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="188">        .i_block_offset_bits<span class="hljs-operator">(</span>ics1_addr_block_offset_bits<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="189">        .i_valid<span class="hljs-operator">(</span>ics1_ta_valid <span class="hljs-operator">&amp;</span> ics1_sa_valid <span class="hljs-operator">&amp;</span> ics1_metadata_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="190">        .i_clear<span class="hljs-operator">(</span>glb_miss_state<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="191"></code>
<code id="192">        .clk<span class="hljs-operator">(</span>clk<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="193">        .arst_n<span class="hljs-operator">(</span>arst_n<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="194">        .i_halt<span class="hljs-operator">(</span>cmh_miss_state<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="195"></code>
<code id="196">        .o_hit_blocks<span class="hljs-operator">(</span>tc_hit_blocks<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="197">        .o_cache_hit<span class="hljs-operator">(</span>tc_cache_hit<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="198"></code>
<code id="199">        .o_tag_bits<span class="hljs-operator">(</span>tc_tag_bits<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="200">        .o_set_bits<span class="hljs-operator">(</span>tc_set_bits<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="201">        .o_block_offset_bits<span class="hljs-operator">(</span>tc_block_offset_bits<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="202">        .o_status_array_data<span class="hljs-operator">(</span>tc_sa_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="203">        </code>
<code id="204">        .o_valid<span class="hljs-operator">(</span>tc_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="205">        .o_ready<span class="hljs-operator">(</span>tc_ready<span class="hljs-operator">)</span></code>
<code id="206">    <span class="hljs-operator">)</span><span class="hljs-operator">;</span></code>
<code id="207"></code>
<code id="208">    use_bit_updater use_bit_updater_m <span class="hljs-operator">(</span></code>
<code id="209">        .i_sa_data<span class="hljs-operator">(</span>tc_sa_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="210">        .i_hit_blocks<span class="hljs-operator">(</span>tc_hit_blocks<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="211">        .i_cache_hit<span class="hljs-operator">(</span>tc_cache_hit<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="212">        .i_valid<span class="hljs-operator">(</span>tc_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="213"></code>
<code id="214">        .o_sa_w_data<span class="hljs-operator">(</span>ubu_sa_w_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="215">        .o_sa_w_mask<span class="hljs-operator">(</span>ubu_sa_w_mask<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="216">        .o_valid<span class="hljs-operator">(</span>ubu_valid<span class="hljs-operator">)</span></code>
<code id="217">    <span class="hljs-operator">)</span><span class="hljs-operator">;</span></code>
<code id="218">  </code>
<code id="219">  </code>
<code id="220">    <span class="hljs-comment">// ============ STAGE 2 ENDS ============</span></code>
<code id="221">    <span class="hljs-comment">// =======================================</span></code>
<code id="222">    <span class="hljs-comment">// ============ STAGE 3 BEGINS ============</span></code>
<code id="223"></code>
<code id="224">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">SET_BITS_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>       cmh_da_set_addr<span class="hljs-operator">;</span></code>
<code id="225"></code>
<code id="226">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span>$clog2<span class="hljs-operator">(</span><span class="hljs-const">NUM_WAYS</span><span class="hljs-operator">)</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>     cmh_da_way_index<span class="hljs-operator">;</span></code>
<code id="227">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">B_OFFSET_BITS_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">3</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>  cmh_da_block_offset_bits<span class="hljs-operator">;</span></code>
<code id="228">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">DA_WRITE_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>       cmh_da_write_data<span class="hljs-operator">;</span></code>
<code id="229">    <span class="hljs-keyword">wire</span>                            cmh_da_blocks_if_valid<span class="hljs-operator">;</span></code>
<code id="230"></code>
<code id="231">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">WORD_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>   cmh_missed_word<span class="hljs-operator">;</span></code>
<code id="232">    <span class="hljs-keyword">wire</span>                    cmh_missed_word_valid<span class="hljs-operator">;</span></code>
<code id="233">    </code>
<code id="234">    <span class="hljs-keyword">wire</span> dac_ready<span class="hljs-operator">;</span></code>
<code id="235"></code>
<code id="236">    cache_miss_handler cache_miss_handler_m <span class="hljs-operator">(</span></code>
<code id="237">        .i_cache_hit<span class="hljs-operator">(</span>tc_cache_hit<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="238">        .i_tag_bits<span class="hljs-operator">(</span>tc_tag_bits<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="239">        .i_set_bits<span class="hljs-operator">(</span>tc_set_bits<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="240">        .i_block_offset_bits<span class="hljs-operator">(</span>tc_block_offset_bits<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="241"></code>
<code id="242">        .i_status_array_data<span class="hljs-operator">(</span>tc_sa_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="243">        .i_valid<span class="hljs-operator">(</span>tc_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="244"></code>
<code id="245">        .i_mem_if_data<span class="hljs-operator">(</span>i_mem_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="246">        .i_mem_if_valid<span class="hljs-operator">(</span>i_mem_data_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span> </code>
<code id="247"></code>
<code id="248">        .clk<span class="hljs-operator">(</span>clk<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="249">        .arst_n<span class="hljs-operator">(</span>arst_n<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="250">        .i_halt<span class="hljs-operator">(</span>i_halt<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="251"></code>
<code id="252">        .i_sa_blocks_halt<span class="hljs-operator">(</span><span class="hljs-operator">~</span>ics1_ready<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="253">        .i_ta_blocks_halt<span class="hljs-operator">(</span><span class="hljs-operator">~</span>ics1_ready<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="254">        .i_da_blocks_halt<span class="hljs-operator">(</span><span class="hljs-operator">~</span>dac_ready<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="255"></code>
<code id="256">        .o_da_set_bits<span class="hljs-operator">(</span>cmh_da_set_addr<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="257">        .o_da_way_index<span class="hljs-operator">(</span>cmh_da_way_index<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="258">        .o_da_block_offset_bits<span class="hljs-operator">(</span>cmh_da_block_offset_bits<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="259">        .o_da_write_data<span class="hljs-operator">(</span>cmh_da_write_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="260">        .o_da_blocks_if_valid<span class="hljs-operator">(</span>cmh_da_blocks_if_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="261"></code>
<code id="262">        .o_ta_write_addr<span class="hljs-operator">(</span>cmh_w_ta_set_addr<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="263">        .o_ta_write_data<span class="hljs-operator">(</span>cmh_w_ta_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="264">        .o_ta_blocks_mask<span class="hljs-operator">(</span>cmh_w_ta_blocks_mask<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="265">        .o_ta_blocks_if_valid<span class="hljs-operator">(</span>cmh_w_ta_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="266"></code>
<code id="267">        .o_sa_write_addr<span class="hljs-operator">(</span>cmh_w_sa_set_addr<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="268">        .o_sa_write_data<span class="hljs-operator">(</span>cmh_w_sa_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="269">        .o_sa_blocks_mask<span class="hljs-operator">(</span>cmh_w_sa_blocks_mask<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="270">        .o_sa_blocks_if_valid<span class="hljs-operator">(</span>cmh_w_sa_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="271"></code>
<code id="272">        .o_mem_if_addr<span class="hljs-operator">(</span>o_mem_addr<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="273">        .o_mem_if_req_valid<span class="hljs-operator">(</span>o_mem_req_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="274">        .o_mem_if_ready<span class="hljs-operator">(</span>o_mem_if_ready<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="275"></code>
<code id="276">        .o_miss_state<span class="hljs-operator">(</span>cmh_miss_state<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="277">        </code>
<code id="278">        .o_missed_word<span class="hljs-operator">(</span>cmh_missed_word<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="279">        .o_missed_word_valid<span class="hljs-operator">(</span>cmh_missed_word_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="280">        .o_ready<span class="hljs-operator">(</span><span class="hljs-operator">)</span></code>
<code id="281">    <span class="hljs-operator">)</span><span class="hljs-operator">;</span></code>
<code id="282">      </code>
<code id="283">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span>$clog2<span class="hljs-operator">(</span><span class="hljs-const">NUM_WAYS</span><span class="hljs-operator">)</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span> oh4d_r_way_index<span class="hljs-operator">;</span></code>
<code id="284">    </code>
<code id="285">    onehot_decoder4 onehot4_dec<span class="hljs-operator">(</span></code>
<code id="286">        .i_onehot<span class="hljs-operator">(</span>tc_hit_blocks<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="287">        .o_decoded<span class="hljs-operator">(</span>oh4d_r_way_index<span class="hljs-operator">)</span></code>
<code id="288">    <span class="hljs-operator">)</span><span class="hljs-operator">;</span></code>
<code id="289">    </code>
<code id="290">    <span class="hljs-keyword">wire</span> <span class="hljs-operator">[</span><span class="hljs-const">WORD_WIDTH</span><span class="hljs-operator">-</span><span class="hljs-const">1</span><span class="hljs-operator">:</span><span class="hljs-const">0</span><span class="hljs-operator">]</span>   dac_word_data<span class="hljs-operator">;</span></code>
<code id="291">    <span class="hljs-keyword">wire</span>                    dac_word_data_valid<span class="hljs-operator">;</span></code>
<code id="292"></code>
<code id="293">    data_arrays_container dac <span class="hljs-operator">(</span></code>
<code id="294">        .i_r_set_bits<span class="hljs-operator">(</span>tc_set_bits<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="295">        .i_r_way_index<span class="hljs-operator">(</span>oh4d_r_way_index<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="296">        .i_r_block_offset_bits<span class="hljs-operator">(</span>tc_block_offset_bits<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="297">        .i_r_valid<span class="hljs-operator">(</span>tc_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="298"></code>
<code id="299">        .i_w_set_bits<span class="hljs-operator">(</span>cmh_da_set_addr<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="300">        .i_w_way_index<span class="hljs-operator">(</span>cmh_da_way_index<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="301">        .i_w_block_offset_bits<span class="hljs-operator">(</span>cmh_da_block_offset_bits<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="302">        .i_w_data<span class="hljs-operator">(</span>cmh_da_write_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="303">        .i_w_valid<span class="hljs-operator">(</span>cmh_da_blocks_if_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="304"></code>
<code id="305">        .clk<span class="hljs-operator">(</span>clk<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="306">        .arst_n<span class="hljs-operator">(</span>arst_n<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="307">        .i_halt_all<span class="hljs-operator">(</span>i_halt<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="308">        .i_stop_read_clk<span class="hljs-operator">(</span>cmh_miss_state<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="309">        .i_stop_write_clk<span class="hljs-operator">(</span><span class="hljs-operator">~</span>cmh_miss_state<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="310"></code>
<code id="311">        .o_word_data<span class="hljs-operator">(</span>dac_word_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="312">        .o_valid<span class="hljs-operator">(</span>dac_word_data_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="313"></code>
<code id="314">        .o_ready<span class="hljs-operator">(</span>dac_ready<span class="hljs-operator">)</span></code>
<code id="315">    <span class="hljs-operator">)</span><span class="hljs-operator">;</span></code>
<code id="316"></code>
<code id="317">    <span class="hljs-keyword">wire</span> cdmsr_miss_state<span class="hljs-operator">;</span></code>
<code id="318"></code>
<code id="319">    register #<span class="hljs-operator">(</span>.<span class="hljs-const">WIDTH</span><span class="hljs-operator">(</span><span class="hljs-const">1</span><span class="hljs-operator">)</span><span class="hljs-operator">)</span> cmh_doa_miss_state_reg <span class="hljs-operator">(</span></code>
<code id="320">      .i_d<span class="hljs-operator">(</span>glb_miss_state<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="321"></code>
<code id="322">      .clk<span class="hljs-operator">(</span>clk<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="323">      .arst_n<span class="hljs-operator">(</span>arst_n<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="324">      .i_halt<span class="hljs-operator">(</span>i_halt<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="325"></code>
<code id="326">      .o_q<span class="hljs-operator">(</span>cdmsr_miss_state<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="327">      .o_ready<span class="hljs-operator">(</span><span class="hljs-operator">)</span></code>
<code id="328">    <span class="hljs-operator">)</span><span class="hljs-operator">;</span></code>
<code id="329">  </code>
<code id="330">    data_out_arb data_out_arb_m <span class="hljs-operator">(</span></code>
<code id="331">      .i_missed_word<span class="hljs-operator">(</span>cmh_missed_word<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="332">      .i_missed_word_valid<span class="hljs-operator">(</span>cmh_missed_word_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="333"></code>
<code id="334">      .i_hit_word<span class="hljs-operator">(</span>dac_word_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="335">      .i_hit_word_valid<span class="hljs-operator">(</span>dac_word_data_valid<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="336"></code>
<code id="337">      .i_miss_state<span class="hljs-operator">(</span>cdmsr_miss_state<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="338">      </code>
<code id="339">      .o_cache_word<span class="hljs-operator">(</span>o_data<span class="hljs-operator">)</span><span class="hljs-operator">,</span></code>
<code id="340">      .o_cache_word_valid<span class="hljs-operator">(</span>o_valid<span class="hljs-operator">)</span></code>
<code id="341">    <span class="hljs-operator">)</span><span class="hljs-operator">;</span></code>
<code id="342"></code>
<code id="343"><span class="hljs-keyword">endmodule</span></code>
</pre>
  </body>
</html>